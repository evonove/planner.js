!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Handlebars=t()}(this,function(){var e=function(){"use strict";function e(e){return l[e]}function t(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function r(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}function n(t){return t&&t.toHTML?t.toHTML():null==t?"":t?(t=""+t,c.test(t)?t.replace(u,e):t):t+""}function a(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}function i(e,t){return e.path=t,e}function o(e,t){return(e?e+".":"")+t}var s={},l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;s.extend=t;var p=Object.prototype.toString;s.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)});var f;s.isFunction=f;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===p.call(e):!1};return s.isArray=h,s.indexOf=r,s.escapeExpression=n,s.isEmpty=a,s.blockParams=i,s.appendContextPath=o,s}(),t=function(){"use strict";function e(e,t){var n,a,i=t&&t.loc;i&&(n=i.start.line,a=i.start.column,e+=" - "+n+":"+a);for(var o=Error.prototype.constructor.call(this,e),s=0;s<r.length;s++)this[r[s]]=o[r[s]];i&&(this.lineNumber=n,this.column=a)}var t,r=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),r=function(e,t){"use strict";function r(e,t){this.helpers=e||{},this.partials=t||{},n(this)}function n(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,r){var n=r.inverse,a=r.fn;if(t===!0)return a(this);if(t===!1||null==t)return n(this);if(c(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):n(this);if(r.data&&r.ids){var o=v(r.data);o.contextPath=i.appendContextPath(r.data.contextPath,r.name),r={data:o}}return a(t,r)}),e.registerHelper("each",function(e,t){function r(t,r,o){n&&(n.key=t,n.index=r,n.first=0===r,n.last=!!o,a&&(n.contextPath=a+t)),f+=s(e[t],{data:n,blockParams:i.blockParams([e[t],t],[a+t,null])})}if(!t)throw new o("Must pass iterator to #each");var n,a,s=t.fn,l=t.inverse,u=0,f="";if(t.data&&t.ids&&(a=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),p(e)&&(e=e.call(this)),t.data&&(n=v(t.data)),e&&"object"==typeof e)if(c(e))for(var h=e.length;h>u;u++)r(u,u,u===e.length-1);else{var d;for(var m in e)e.hasOwnProperty(m)&&(d&&r(d,u-1),d=m,u++);d&&r(d,u-1,!0)}return 0===u&&(f=l(this)),f}),e.registerHelper("if",function(e,t){return p(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){return e.helpers["if"].call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}),e.registerHelper("with",function(e,t){p(e)&&(e=e.call(this));var r=t.fn;if(i.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var n=v(t.data);n.contextPath=i.appendContextPath(t.data.contextPath,t.ids[0]),t={data:n}}return r(e,t)}),e.registerHelper("log",function(t,r){var n=r.data&&null!=r.data.level?parseInt(r.data.level,10):1;e.log(n,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var a={},i=e,o=t,s="3.0.0";a.VERSION=s;var l=6;a.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};a.REVISION_CHANGES=u;var c=i.isArray,p=i.isFunction,f=i.toString,h="[object Object]";a.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:d,log:m,registerHelper:function(e,t){if(f.call(e)===h){if(t)throw new o("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(f.call(e)===h)i.extend(this.partials,e);else{if("undefined"==typeof t)throw new o("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&d.level<=e){var r=d.methodMap[e];(console[r]||console.log).call(console,t)}}};a.logger=d;var m=d.log;a.log=m;var v=function(e){var t=i.extend({},e);return t._parent=e,t};return a.createFrame=v,a}(e,t),n=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=e.prototype.toHTML=function(){return""+this.string},t=e}(),a=function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=h;if(t!==r){if(r>t){var n=d[r],a=d[t];throw new f("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+a+").")}throw new f("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new f("No environment passed to template");if(!e||!e.main)throw new f("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var r=function(r,n,a){a.hash&&(n=p.extend({},n,a.hash)),r=t.VM.resolvePartial.call(this,r,n,a);var i=t.VM.invokePartial.call(this,r,n,a);if(null==i&&t.compile&&(a.partials[a.name]=t.compile(r,e.compilerOptions,t),i=a.partials[a.name](n,a)),null!=i){if(a.indent){for(var o=i.split("\n"),s=0,l=o.length;l>s&&(o[s]||s+1!==l);s++)o[s]=a.indent+o[s];i=o.join("\n")}return i}throw new f("The partial "+a.name+" could not be compiled when running in runtime-only mode")},n={strict:function(e,t){if(!(t in e))throw new f('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var r=e.length,n=0;r>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:p.escapeExpression,invokePartial:r,fn:function(t){return e[t]},programs:[],program:function(e,t,r,n,a){var o=this.programs[e],s=this.fn(e);return t||a||n||r?o=i(this,e,s,t,r,n,a):o||(o=this.programs[e]=i(this,e,s)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=p.extend({},t,e)),r},noop:t.VM.noop,compilerInfo:e.compiler},a=function(t,r){r=r||{};var i=r.data;a._setup(r),!r.partial&&e.useData&&(i=u(t,i));var o,s=e.useBlockParams?[]:void 0;return e.useDepths&&(o=r.depths?[t].concat(r.depths):[t]),e.main.call(n,t,n.helpers,n.partials,i,s,o)};return a.isTop=!0,a._setup=function(r){r.partial?(n.helpers=r.helpers,n.partials=r.partials):(n.helpers=n.merge(r.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(r.partials,t.partials)))},a._child=function(t,r,a,o){if(e.useBlockParams&&!a)throw new f("must pass block params");if(e.useDepths&&!o)throw new f("must pass parent depths");return i(n,t,e[t],r,0,a,o)},a}function i(e,t,r,n,a,i,o){var s=function(t,a){return a=a||{},r.call(e,t,e.helpers,e.partials,a.data||n,i&&[a.blockParams].concat(i),o&&[t].concat(o))};return s.program=t,s.depth=o?o.length:0,s.blockParams=a||0,s}function o(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e=r.partials[r.name],e}function s(e,t,r){if(r.partial=!0,void 0===e)throw new f("The partial "+r.name+" could not be found");return e instanceof Function?e(t,r):void 0}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?m(t):{},t.root=e),t}var c={},p=e,f=t,h=r.COMPILER_REVISION,d=r.REVISION_CHANGES,m=r.createFrame;return c.checkRevision=n,c.template=a,c.program=i,c.resolvePartial=o,c.invokePartial=s,c.noop=l,c}(e,t,r),i=function(e,t,r,n,a){"use strict";var i,o=e,s=t,l=r,u=n,c=a,p=function(){var e=new o.HandlebarsEnvironment;return u.extend(e,o),e.SafeString=s,e.Exception=l,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},f=p();f.create=p;var h="undefined"!=typeof global?global:window,d=h.Handlebars;return f.noConflict=function(){h.Handlebars===f&&(h.Handlebars=d)},f["default"]=f,i=f}(r,n,t,e,a);return i});
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):(t.Ds=t.Ds||{},t.Ds.HashMap=e())}(this,function(){"use strict";var t=function(){function t(){throw new Error("Illegal operation for Hashmap")}function e(t){return typeof t+" "+(t instanceof Object?t._hash||(t._hash=++n):t.toString())}var n=0,i=0;this.get=function(t){var n=this[e(t)];return n&&n.value},this.put=function(t,n){var r=e(t);return"undefined"==typeof this[r]?(this[r]={key:t,value:n},i+=1):this[r].value=n,this},this.remove=function(t){var n=e(t),r=this[n];return"undefined"!=typeof r&&(i-=1,delete this[n]),this},Object.defineProperty(this,"size",{get:function(){return i},set:function(){t()}})};return t});
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):(t.Ds=t.Ds||{},t.Ds.Set=e())}(this,function(){"use strict";var t=function(){function t(){throw new Error("Illegal operation for Set")}function e(t){return typeof t+" "+(t instanceof Object?t._hash||(t._hash=++n):t.toString())}var n=0,r={},i=0;this["in"]=function(t){var n=e(t);return"undefined"!=typeof r[n]},this.add=function(t){var n=e(t);return"undefined"==typeof r[n]&&(i+=1),r[n]=t,this},this.update=function(t){for(var n=0;n<t.length;n++){var o=e(t[n]);"undefined"==typeof r[o]&&(i+=1),r[o]=t[n]}return this},this.remove=function(t){var n=e(t),o=r[n];if("undefined"==typeof o)throw new Error("KeyError: object "+o+" is not stored");return i-=1,delete r[n],this},this.discard=function(t){try{this.remove(t)}catch(e){}return this},this.clear=function(){for(var t in r)r.hasOwnProperty(t)&&this.remove(r[t]);return this},this.items=function(){return Object.keys(r).map(function(t){return r[t]})},Object.defineProperty(this,"size",{get:function(){return i},set:function(){t()}})};return t});
!function(t,n){"use strict";"function"==typeof define&&define.amd?define([],n):(t.Ds=t.Ds||{},t.Ds.BinaryHeap=n())}(this,function(){"use strict";var t=function(t){this.content=[],this.scoreFunction=t,this.push=function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},this.pop=function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},this.remove=function(t){for(var n=this.content.length,i=0;n>i;i++)if(this.content[i]===t){var s=this.content.pop();if(i===n-1)break;this.content[i]=s,this.bubbleUp(i),this.sinkDown(i);break}},this.size=function(){return this.content.length},this.bubbleUp=function(t){for(var n=this.content[t],i=this.scoreFunction(n);t>0;){var s=Math.floor((t+1)/2)-1,o=this.content[s];if(i>=this.scoreFunction(o))break;this.content[s]=n,this.content[t]=o,t=s}},this.sinkDown=function(t){for(var n=this.content.length,i=this.content[t],s=this.scoreFunction(i);;){var o,e=2*(t+1),h=e-1,c=null;if(n>h){var r=this.content[h];o=this.scoreFunction(r),s>o&&(c=h)}if(n>e){var u=this.content[e],f=this.scoreFunction(u);(null===c?s:o)>f&&(c=e)}if(null===c)break;this.content[t]=this.content[c],this.content[c]=i,t=c}}};return t});
!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):n.Messenger=t()}(this,function(){"use strict";function n(){var n={},t=-1;this.publish=function(t,r){if(!n[t])return!1;for(var i=n[t],e=i?i.length:0;e--;)i[e].func.apply(this,r);return this},this.subscribe=function(r,i){if(!r||"function"!=typeof i)throw new Error("Missing a valid channel or callback");n[r]||(n[r]=[]);var e=(++t).toString();return n[r].push({token:e,func:i}),e},this.unsubscribe=function(t){if(!t)throw new Error("Can't unsubscribe without a valid token");for(var r in n)if(n[r])for(var i=0,e=n[r].length;e>i;i++)if(n[r][i].token===t)return n[r].splice(i,1),t;throw new Error("Can't unsubscribe from a token that doesn't exist")}}return n});
!function(t,e){"use strict";function i(t,i){function o(t){var i=this;Object.defineProperty(i,"__attributes__",{value:{}}),Object.defineProperty(i,"__inFlightAttributes__",{value:{}}),t=i.deserializer(t),i.__fields__.forEach(function(r){i.__attributes__[r]=t[r],i.__inFlightAttributes__[r]=e}),i.rollback=function(){for(var t in i.__inFlightAttributes__)i.__inFlightAttributes__.hasOwnProperty(t)&&(i.__inFlightAttributes__[t]=e)},i.persist=function(){for(var t in i.__inFlightAttributes__)i.__inFlightAttributes__.hasOwnProperty(t)&&"undefined"!=typeof i.__inFlightAttributes__[t]&&(i.__attributes__[t]=i.__inFlightAttributes__[t],i.__inFlightAttributes__[t]=e)}}function u(){return r({},this.__attributes__,this.__inFlightAttributes__)}function s(t){return t||{}}function f(t){if("function"!=typeof t)throw new Error("Model serializer should be a function");o.prototype.toJSON=function(){var e=u.apply(this);return t.apply(e)}}function a(t){if("function"!=typeof t)throw new Error("Model deserializer should be a function");o.prototype.deserializer=t}return Object.defineProperty(o.prototype,"__fields__",{value:t,writable:!0}),_(o.prototype.__fields__,o.prototype),n(i,o.prototype),o.prototype.toJSON=u,o.prototype.deserializer=s,o.setSerializer=f,o.setDeserializer=a,o}function r(t){var i=Object.prototype.toString;t=t||{};for(var _=1;_<arguments.length;_++){var n=arguments[_];if(n)for(var o in n)if(n.hasOwnProperty(o)&&"undefined"!=typeof n[o]){var u=i.call(n[o]);switch(u){case"[object Object]":t[o]=r(t[o],n[o]);break;default:t[o]=n[o]}}}return Object.getOwnPropertyNames(t).length>0?t:e}function _(t,i){t.forEach(function(t){Object.defineProperty(i,t,{get:function(){return this.__inFlightAttributes__[t]!==e?this.__inFlightAttributes__[t]:this.__attributes__[t]},set:function(e){this.__inFlightAttributes__[t]=e}})})}function n(t,e){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}i.extend=function(t,e,r){var o=new i(e);return o.prototype=new t,o.prototype.__fields__=e.concat(o.prototype.__fields__),_(e,o.prototype),n(r,o.prototype),o},t.Model=i}(window);
!function(n,e){"use strict";var t=function(e,l){var i=n.Planner.Utils.getAttributes(e);return l=n.Planner.Utils.extend({},t.DEFAULTS,n.Planner.Plugins.DEFAULTS,i,l),l.plugins=l.plugins||"string"==typeof l.plugins&&l.plugins.split(" ")||[],l.model=l.model||Planner.Models.Card,new n.Planner.Instance(e,l)};t.CONST={ALIGNMENT:{TOP:0,MIDDLE:1}},t.DEFAULTS={autoId:!0,show:!0,plugins:[],model:null,timeslots:4,timeslotHeight:25,timeslotPadding:20,cardTitleMargin:6,centered:t.CONST.ALIGNMENT.TOP,columnLabels:[],rowLabels:[],visibleColumns:7},document.addEventListener("DOMContentLoaded",function(){for(var n=document.querySelectorAll('[data-planner=""]'),e=0;e<n.length;e++)new t(n[e])}),n.Planner=t}(window);
"use strict";Planner.Modernizr=function(e,n,t){function o(e){p.cssText=e}function r(e,n){return typeof e===n}var i,a,s,c="2.8.3",u={},l=n.documentElement,d="modernizr",f=n.createElement(d),p=f.style,y=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),m={},h=[],v=h.slice,b=function(e,t,o,r){var i,a,s,c,u=n.createElement("div"),f=n.body,p=f||n.createElement("body");if(parseInt(o,10))for(;o--;)s=n.createElement("div"),s.id=r?r[o]:d+(o+1),u.appendChild(s);return i=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),u.id=d,(f?u:p).innerHTML+=i,p.appendChild(u),f||(p.style.background="",p.style.overflow="hidden",c=l.style.overflow,l.style.overflow="hidden",l.appendChild(p)),a=t(u,e),f?u.parentNode.removeChild(u):(p.parentNode.removeChild(p),l.style.overflow=c),!!a},w={}.hasOwnProperty;s=r(w,"undefined")||r(w.call,"undefined")?function(e,n){return n in e&&r(e.constructor.prototype[n],"undefined")}:function(e,n){return w.call(e,n)},Function.prototype.bind||(Function.prototype.bind=function(e){var n=this;if("function"!=typeof n)throw new TypeError;var t=v.call(arguments,1),o=function(){if(this instanceof o){var r=function(){};r.prototype=n.prototype;var i=new r,a=n.apply(i,t.concat(v.call(arguments)));return Object(a)===a?a:i}return n.apply(e,t.concat(v.call(arguments)))};return o}),m.touch=function(){var t;return"ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch?t=!0:b(["@media (",y.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=9===e.offsetTop}),t};for(var C in m)s(m,C)&&(a=C.toLowerCase(),u[a]=m[C](),h.push((u[a]?"":"no-")+a));return u.addTest=function(e,n){if("object"==typeof e)for(var o in e)s(e,o)&&u.addTest(o,e[o]);else{if(e=e.toLowerCase(),u[e]!==t)return u;n="function"==typeof n?n():n,"undefined"!=typeof enableClasses&&enableClasses&&(l.className+=" "+(n?"":"no-")+e),u[e]=n}return u},o(""),f=i=null,u._version=c,u._prefixes=y,u.testStyles=b,u}(this,this.document);
!function(e,n,s){"use strict";e.Instance=function(s,l){this.element=s,this.options=l,this.mapCard=new n,this.mapDom=new n,this.events=new Messenger,0===l.columnLabels.length&&(l.columnLabels=e.Helpers.getDefaultColumns()),0===l.rowLabels.length&&(l.rowLabels=e.Helpers.getDefaultRows()),l.visibleColumns=l.visibleColumns>l.columnLabels.length?l.columnLabels.length:l.visibleColumns,s.setAttribute("data-planner","container"),l.show&&(this.element.innerHTML=e.Templates.body(l));var t=document.querySelector("head");t.appendChild(this._computedCSS()),e.Plugins.load(l.plugins,this)}}(window.Planner=window.Planner||{},Ds.HashMap);
!function(e,t){"use strict";e.pad=function(e,t){return"undefined"==typeof t&&(t=-2),("0"+e).slice(t)},e.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},e.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},e.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},e.hasClass=function(e,t){e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},e.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},e.getAttributes=function(e){var n=e.attributes,r={};for(var s in n)if(n.hasOwnProperty(s)&&n[s].name&&n[s].name.indexOf("data-")>-1){var l=a(n[s].name.split("data-")[1]),o=n[s].value;if("string"==typeof o)try{o="true"===o?!0:"false"===o?!1:"null"===o?null:+o+""===o?+o:o}catch(i){}else o=t;r[l]=o}return r},e.index=function(e){var t=e.parentNode;return Array.prototype.indexOf.call(t.children,e)},e.offset=function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},e.updateDate=function(e,t,n,r){var a=new Date(e);return a.setHours(t),a.setMinutes(n),a.setSeconds(r||0),a},e.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},e.getColumnWidth=function(t,n){return n=n||e.getColumns(t),n[0].offsetWidth},e.getColumns=function(e){for(var t=[],n=e.querySelectorAll(".planner-column"),r=0;r<n.length;r++)"none"!==n[r].style.display&&t.push(n[r]);return t};var n=/([\:\-\_]+(.))/g,r=/^moz([A-Z])/,a=function(e){return e.replace(n,function(e,t,n,r){return r?n.toUpperCase():n}).replace(r,"Moz$1")}}(Planner.Utils=Planner.Utils||{});
!function(e,n,a){"use strict";var m=[{id:0,name:"Monday"},{id:1,name:"Tuesday"},{id:2,name:"Wednesday"},{id:3,name:"Thursday"},{id:4,name:"Friday"},{id:5,name:"Saturday"},{id:6,name:"Sunday"}],r=[{name:"00:00"},{name:"01:00"},{name:"02:00"},{name:"03:00"},{name:"04:00"},{name:"05:00"},{name:"06:00"},{name:"07:00"},{name:"08:00"},{name:"09:00"},{name:"10:00"},{name:"11:00"},{name:"12:00"},{name:"13:00"},{name:"14:00"},{name:"15:00"},{name:"16:00"},{name:"17:00"},{name:"18:00"},{name:"19:00"},{name:"20:00"},{name:"21:00"},{name:"22:00"},{name:"23:00"}];e.getDefaultColumns=function(){return m},e.getDefaultRows=function(){return r},e.generateId=function(e){return e.lastId=e.lastId||999,++e.lastId},n.registerHelper("times",function(e,n){for(var a="",m=0;e>m;++m)a+=n.fn(m);return a})}(Planner.Helpers=Planner.Helpers||{},Handlebars);
!function(t,i,e){"use strict";var o={};o._computedCSS=function(){var t=this.options.timeslotHeight*this.options.timeslots,i=this.options.centered?t/2:t,e={timeslots:this.options.timeslots,timeslotHeight:this.options.timeslotHeight,timeslotPadding:t-this.options.timeslotPadding,timeslotNormalized:t-this.options.timeslotPadding-1,lastTimeslotPadding:i,sliderWidth:100/this.options.visibleColumns},o=document.createElement("style");return o.innerHTML=Planner.Templates.styles(e),o},o._attributeToIndex=function(t){var i;if("function"==typeof t.getHours&&"function"==typeof t.getMinutes)i=t.getHours()*this.options.timeslots+t.getMinutes()/(60/this.options.timeslots);else{if("string"!=typeof t)throw new Error("Unable to find a valid index from start/end card attribute. Define your own implementation.");i=this.options.rowLabels.indexOf(t)}return i},o._indexToAttribute=function(t){var i=Math.floor((t-1)/this.options.timeslots),e=15*(t%this.options.timeslots);return e===t%this.options.timeslots&&(i+=1),{hours:i,minutes:e}},t.prototype=i.extend(t.prototype,o)}(Planner.Instance=Planner.Instance||{},Planner.Utils);
!function(t,e,a,r){"use strict";var n={};n.drawCard=function(t,a,r){var n,i=this.mapCard.get(t);if("undefined"==typeof i){t.disabled=r,t.cssList=a,i={},this.mapCard.put(t,i);for(var s=0;s<t.columns.length;s++){var o=t.columns[s];n=e.createElement(Planner.Templates.card(t)),this.updateDom(n,t,o),this.mapDom.put(n,t),i[o]=n,this._drawDom(n)}this.events.publish("cardDrawn",[t])}},n._drawDom=function(t){var a=parseInt(t.getAttribute("data-column"),10),r=parseInt(t.getAttribute("data-start"),10),n=e.index(this.element.querySelector('[data-column-id="'+a+'"]'))+1;this.element.querySelector(".planner-column:nth-of-type("+n+") > div:nth-of-type("+(r+1)+")").appendChild(t),this.events.publish("cardDomDrawn",[this.mapDom.get(t),t])},n.updateDom=function(t,a,n){var i=this._attributeToIndex(a.start),s=this._attributeToIndex(a.end)-1;if(0>s&&(s=this.options.timeslots*this.options.rowLabels.length-1),s=i>s?i:s,s>=i){var o=(s-i+1)*this.options.timeslotHeight-this.options.cardTitleMargin;"undefined"!=typeof n&&t.setAttribute("data-column",n),t.setAttribute("data-id",a.id),t.setAttribute("data-start",i),t.setAttribute("data-end",s),t.querySelector(".planner-card-time").innerHTML=a.header(),t.style.height=o+"px"}a.cssList!==r&&e.addClass(t,a.cssList)},n._removeDom=function(t){t.parentNode.removeChild(t);var e=this.mapDom.get(t),a=this.mapCard.get(e);delete a[parseInt(t.getAttribute("data-column"),10)],this.mapDom.remove(t),this.events.publish("cardDomDeleted",[e,t])},n.undrawCard=function(t){var e,a=this.mapCard.get(t);for(var r in a)a.hasOwnProperty(r)&&(e=a[r],this._removeDom(e));this.mapCard.remove(t),this.events.publish("cardDeleted",[t])},n.clear=function(){for(var t,e=document.querySelectorAll(".planner-card"),r=0;r<e.length;r++)t=e[r],t.parentNode.removeChild(t);this.mapCard=new a,this.mapDom=new a,this.events.publish("plannerClear",[this])},t.prototype=e.extend(t.prototype,n)}(Planner.Instance=Planner.Instance||{},Planner.Utils,Ds.HashMap);
!function(t,n,s){"use strict";function i(){var t="";return null!==this.start&&null!==this.end&&(t=Planner.Utils.pad(this.start.getHours())+":"+Planner.Utils.pad(this.start.getMinutes())+" - "+Planner.Utils.pad(this.end.getHours())+":"+Planner.Utils.pad(this.end.getMinutes())),t}function e(t){this.id=t.id||this.id,this.title=t.title||this.title,this.content=t.content||this.content,this.start=t.start||this.start,this.end=t.end||this.end,this.columns=t.columns||this.columns}var l=["id","title","content","start","end","columns"],a={header:i,update:e};n.Card=new t(l,a)}(window.Model,Planner.Models=Planner.Models||{});
Handlebars.registerPartial("column",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){return""},useData:!0})),this.Planner=this.Planner||{},this.Planner.Templates=this.Planner.Templates||{},this.Planner.Templates.body=Handlebars.template({1:function(n,a,l,e){var t;return null!=(t=this.invokePartial(l.timeslot,n,{name:"timeslot",data:e,indent:"            ",helpers:a,partials:l}))?t:""},3:function(n,a,l,e,t,i){var r,s;return'              <div class="planner-column" data-column-id="'+this.escapeExpression((s=null!=(s=a.id||(null!=n?n.id:n))?s:a.helperMissing,"function"==typeof s?s.call(n,{name:"id",hash:{},data:e}):s))+'">\n'+(null!=(r=a.each.call(n,null!=i[1]?i[1].rowLabels:i[1],{name:"each",hash:{},fn:this.program(4,e,0,t,i),inverse:this.noop,data:e}))?r:"")+"              </div>\n"},4:function(n,a,l,e,t,i){var r;return null!=(r=(a.times||n&&n.times||a.helperMissing).call(n,null!=i[2]?i[2].timeslots:i[2],{name:"times",hash:{},fn:this.program(5,e,0,t,i),inverse:this.noop,data:e}))?r:""},5:function(n,a,l,e){return"                      <div></div>\n"},7:function(n,a,l,e){var t;return'          <div class="planner-column-header">\n              <div class="planner-column-header-inner">'+this.escapeExpression((t=null!=(t=a.name||(null!=n?n.name:n))?t:a.helperMissing,"function"==typeof t?t.call(n,{name:"name",hash:{},data:e}):t))+"</div>\n          </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e,t,i){var r;return'<div class="planner-scroller">\n    <div class="planner-container">\n        <div class="planner-timeslots">\n'+(null!=(r=a.each.call(n,null!=n?n.rowLabels:n,{name:"each",hash:{},fn:this.program(1,e,0,t,i),inverse:this.noop,data:e}))?r:"")+'        </div>\n        <div class="planner-slider">\n'+(null!=(r=a.each.call(n,null!=n?n.columnLabels:n,{name:"each",hash:{},fn:this.program(3,e,0,t,i),inverse:this.noop,data:e}))?r:"")+'        </div>\n    </div>\n</div>\n\n<div class="planner-header">\n    <div class="planner-timeslots-header"></div>\n    <div class="planner-slider">\n'+(null!=(r=a.each.call(n,null!=n?n.columnLabels:n,{name:"each",hash:{},fn:this.program(7,e,0,t,i),inverse:this.noop,data:e}))?r:"")+"    </div>\n</div>\n"},usePartial:!0,useData:!0,useDepths:!0}),Handlebars.registerPartial("timeslot",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){var t;return"<div>"+this.escapeExpression((t=null!=(t=a.name||(null!=n?n.name:n))?t:a.helperMissing,"function"==typeof t?t.call(n,{name:"name",hash:{},data:e}):t))+"</div>\n"},useData:!0})),this.Planner.Templates.card=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){var t,i=a.helperMissing,r="function",s=this.escapeExpression;return'<div class="planner-card">\n    <div class="planner-card-time">'+s((t=null!=(t=a.header||(null!=n?n.header:n))?t:i,typeof t===r?t.call(n,{name:"header",hash:{},data:e}):t))+'</div>\n    <div class="planner-card-title">'+s((t=null!=(t=a.title||(null!=n?n.title:n))?t:i,typeof t===r?t.call(n,{name:"title",hash:{},data:e}):t))+"</div>\n</div>\n"},useData:!0}),this.Planner.Templates.interaction=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){return"<style>\n\n    div.planner-card > .planner-card-drag {\n        width: 100%;\n        text-align: center;\n        font-size: 10px;\n        bottom: 1px;\n        position: absolute;\n        cursor: ns-resize;\n    }\n\n    div.planner-card.resizable {\n        cursor: ns-resize;\n    }\n</style>\n"},useData:!0}),this.Planner.Templates.mobile=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){var t,i=this.lambda,r=this.escapeExpression;return"<style>\n\n    @media (max-width: 768px) {\n        .planner-container.planner-column {\n            margin-right: 5px;\n        }\n\n        .planner-header.planner-column-header {\n            margin-right: 5px;\n        }\n\n        .planner-timeslots {\n            padding-right: 5px;\n        }\n\n        .planner-card-drag {\n            display: none;\n        }\n    }\n\n\n    @media (max-width: 768px) and (orientation: portrait) {\n        .planner-container.planner-column {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.phone:t)?t.portrait:t,n))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.phone:t)?t.portrait:t,n))+"%;\n        }\n\n        .planner-slider {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.phone:t)?t.portrait:t,n))+"%;\n        }\n    }\n\n\n    @media (max-width: 768px) and (orientation: landscape) {\n        .planner-container.planner-column {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.phone:t)?t.landscape:t,n))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.phone:t)?t.landscape:t,n))+"%;\n        }\n\n        .planner-slider {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.phone:t)?t.landscape:t,n))+"%;\n        }\n    }\n\n\n    @media (min-width: 768px) and (max-width: 991px) and (orientation: portrait) {\n        .planner-container.planner-column {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.tablet:t)?t.portrait:t,n))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.tablet:t)?t.portrait:t,n))+"%;\n        }\n\n        .planner-slider {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.tablet:t)?t.portrait:t,n))+"%;\n        }\n    }\n\n\n    @media (min-width: 768px) and (max-width: 991px) and (orientation: landscape) {\n        .planner-container.planner-column {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.tablet:t)?t.landscape:t,n))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.tablet:t)?t.landscape:t,n))+"%;\n        }\n\n        .planner-slider {\n            width: "+r(i(null!=(t=null!=(t=null!=n?n.widths:n)?t.tablet:t)?t.landscape:t,n))+"%;\n        }\n    }\n</style>\n"},useData:!0}),this.Planner.Templates.styles=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){var t,i=a.helperMissing,r="function",s=this.escapeExpression;return"\n.planner-column > div {\n    height: "+s((t=null!=(t=a.timeslotHeight||(null!=n?n.timeslotHeight:n))?t:i,typeof t===r?t.call(n,{name:"timeslotHeight",hash:{},data:e}):t))+"px;\n}\n\n.planner-column > div:nth-child("+s((t=null!=(t=a.timeslots||(null!=n?n.timeslots:n))?t:i,typeof t===r?t.call(n,{name:"timeslots",hash:{},data:e}):t))+"n) {\n    border-bottom: 2px solid #cccccc;\n}\n\n\n.planner-timeslots > div:not(:first-child) {\n    padding-top: "+s((t=null!=(t=a.timeslotPadding||(null!=n?n.timeslotPadding:n))?t:i,typeof t===r?t.call(n,{name:"timeslotPadding",hash:{},data:e}):t))+"px;\n}\n\n\n.planner-timeslots > div:nth-child(2) {\n    padding-top: "+s((t=null!=(t=a.timeslotNormalized||(null!=n?n.timeslotNormalized:n))?t:i,typeof t===r?t.call(n,{name:"timeslotNormalized",hash:{},data:e}):t))+"px;\n}\n\n.planner-timeslots > div:last-child {\n    padding-bottom: "+s((t=null!=(t=a.lastTimeslotPadding||(null!=n?n.lastTimeslotPadding:n))?t:i,typeof t===r?t.call(n,{name:"lastTimeslotPadding",hash:{},data:e}):t))+"px;\n}\n\n.planner-slider {\n    width: "+s((t=null!=(t=a.sliderWidth||(null!=n?n.sliderWidth:n))?t:i,typeof t===r?t.call(n,{name:"sliderWidth",hash:{},data:e}):t))+"%;\n}\n"},useData:!0}),this.Planner.Templates.arrows=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){return'<div class="arrow-switcher arrow-left"></div>\n<div class="arrow-switcher arrow-right"></div>\n'},useData:!0}),this.Planner.Templates.drag=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){var t;return'<div class="planner-card-drag">'+this.escapeExpression((t=null!=(t=a.dragComponent||(null!=n?n.dragComponent:n))?t:a.helperMissing,"function"==typeof t?t.call(n,{name:"dragComponent",hash:{},data:e}):t))+"</div>\n"},useData:!0}),this.Planner.Templates.hourline=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(n,a,l,e){return'<div class="hourline"></div>\n'},useData:!0});
!function(n,r,e){"use strict";n.DEFAULTS={},n.registry={},n.loaded={},n.load=function(r,e){if(!Array.isArray(r))throw new Error('"Plugins" option on Planner.js should be a list of string');for(var i=0;i<r.length;i++)n.call(r[i],e)},n.register=function(e,i){n.DEFAULTS=r.extend({},n.DEFAULTS,i.DEFAULTS),n.registry[e]=i},n.call=function(r,e,i){var t=n.registry[r];if("function"!=typeof t)throw new Error("Chosen plugin is not available: "+r);var o=t.bind(e,e.element,e.options,e,i);e.plugins=e.plugins||{},e.plugins[r]=new o,n.loaded[r]=!0},n.isRegistered=function(r){return"undefined"!=typeof n.registry[r]},n.requires=function(r){if(!n.loaded[r])throw new Error('"'+r+'" plugin is required.');return!0}}(Planner.Plugins=Planner.Plugins||{},Planner.Utils);
!function(e,n,t,i,r){"use strict";var s=function(n,r){function s(){var e,n=document.documentElement.clientWidth;if(n>=992)e=c.options.visibleColumns;else{var t=768>n?"phone":"tablet",i=l?"landscape":"portrait";e=c.options.mobileVisibleColumns[t][i]}return e}function o(){l=e.innerHeight<e.innerWidth}this.element=n,this.options=r,this.currentIndex=0,this.cacheSliders=n.querySelectorAll(".planner-slider");var l=!1,a=0,c=this,h=function(){c.element.innerHTML+=Planner.Templates.arrows();var e=c.element.querySelector(".arrow-left"),n=c.element.querySelector(".arrow-right");e.addEventListener("click",function(){c.slideLeft()}),n.addEventListener("click",function(){c.slideRight()})},d=function(){for(var e=0,t=0,r=!1,o=function(n){n=n.touches[0],e=n.clientX},l=function(o){var l=o.touches[0];if(t=l.clientX-e,!r&&(t<-c.options.minMovement||t>c.options.minMovement)){var h=s(),d=i.getColumns(n);r=!0,c.minOffset=0;for(var u=0,m=c.cacheSliders.length;m>u;u++)c.cacheSliders[u].style.transition="none";for(u=0,m=d.length-h;m>u;u++)c.minOffset-=d[u].offsetWidth}r&&f(i.clamp(a+t,c.minOffset,0))},h=function(s){if(r){var o=s.changedTouches[0],l=Math.abs(Math.round((o.clientX-e)/i.getColumnWidth(n)));r=!1,t>c.options.minSwipe?c.slideLeft(l):t<-c.options.minSwipe?c.slideRight(l):f(a);for(var h=0;h<c.cacheSliders.length;h++)c.cacheSliders[h].style.transition="";t=0,a=u()}},d=0;d<c.cacheSliders.length;d++)c.cacheSliders[d].addEventListener("touchstart",o),c.cacheSliders[d].addEventListener("touchmove",l),c.cacheSliders[d].addEventListener("touchend",h)},u=function(){var e=i.getColumnWidth(n);return-e*c.currentIndex},f=function(e){if("number"!=typeof e)throw new Error("Unable to append a 3D translation if the value isn't a number");for(var n="translate3d("+e+"px, 0, 0)",t=0;t<c.cacheSliders.length;t++)c.cacheSliders[t].style.webkitTransform=n,c.cacheSliders[t].style.mozTransform=n,c.cacheSliders[t].style.msTransform=n,c.cacheSliders[t].style.oTransform=n,c.cacheSliders[t].style.transform=n};this.goToStart=function(){this.currentIndex=0,f(0),a=0},this.slideLeft=function(e){e=e||1,this.currentIndex=Math.max(this.currentIndex-e,0),f(u())},this.slideRight=function(e){e=e||1,this.currentIndex=Math.min(this.currentIndex+e,Math.max(i.getColumns(n).length-s(),0)),f(u())},o(),t.touch&&Planner.Plugins.isRegistered("mobile")?(e.addEventListener("resize",o,!1),d()):h()};s.DEFAULTS={minMovement:50,minSwipe:90,headerOffset:5},n.Slider=s,n.register("slider",s)}(window,Planner.Plugins,Planner.Modernizr,Planner.Utils);
!function(t,e,n,r,a){"use strict";var s=function(t,r,a){function s(t,e){var n=l(e);f(e,n)}function i(t,e){var n=l(e),r=n.all.items()[1];n.left.discard(e),n.split.discard(e),c(n.all.items()),f(r,n)}function l(t){var e,r,a,s,i=[],l=new n,f=new n,u=new n;for(i.push(t);i.length>0;)if(e=i.shift(),r=t.parentElement,null!==r){s=parseInt(e.getAttribute("data-id"),10),a=t.parentElement.parentElement.querySelectorAll('.planner-card:not(.dragged):not([data-id="'+s+'"])');for(var d=0,c=a.length;c>d;d++)if(o(e,a[d])){var g=p(e,a[d]);g===h?f["in"](a[d])||(f.update([e,a[d]]),l.update([e,a[d]]),i.push(a[d])):u["in"](a[d])||(u.update([e,a[d]]),l.update([e,a[d]]),i.push(a[d]))}}return{all:l,split:f,left:u}}function f(t,e){e.split.size>0&&u(t,e.split.items()),e.left.size>0&&d(t,e.left.items())}function u(n,r){for(var a=n.offsetLeft,s=e.getColumnWidth(t)/r.length,i=0,l=r.length;l>i;i++){var f=a+s*i;r[i].style.width=s+"px",r[i].style.left=f+"px"}}function d(n,a){var s,i,l,f,u,d=n.offsetLeft;a.sort(g),a.shift();for(var o=0,p=a.length;p>o;o++){if(a[o].style.left){var c=a[o].style.left,h=a[o].style.width;c=c.substring(0,c.length-2),h=h.substring(0,h.length-2),s=parseInt(c,10),i=parseInt(h,10)}else s=d-r.marginAdjustment,i=a[o].offsetWidth;u=e.getColumnWidth(t)/i*r.collisionOffset,l=s+r.collisionOffset,f=a[o].offsetWidth-u,a[o].style.left=l+"px",a[o].style.width=f+"px"}}function o(t,e){var n=parseInt(t.getAttribute("data-start"),10),r=parseInt(t.getAttribute("data-end"),10),a=parseInt(e.getAttribute("data-start"),10),s=parseInt(e.getAttribute("data-end"),10);return n>=a&&s>=n||r>=a&&s>=r?!0:a>=n&&r>=s||a>=n&&r>=s}function p(t,e){var n=parseInt(t.getAttribute("data-start"),10),r=parseInt(e.getAttribute("data-start"),10);return n===r||n===r+1||r===n+1?h:v}function c(t){for(var e=0,n=t.length;n>e;e++)t[e].style.left="",t[e].style.width=""}function g(t,e){var n=parseInt(t.getAttribute("data-start"),10),r=parseInt(e.getAttribute("data-start"),10);return n-r}var h=0,v=1;a.events.subscribe("/card/interaction/drawn",s),a.events.subscribe("/card/actions/dragged",i),a.events.subscribe("cardDomDrawn",s)};s.DEFAULTS={marginAdjustment:3,collisionOffset:5},t.register("collision",s)}(Planner.Plugins,Planner.Utils,Ds.Set,Ds.HashMap);
!function(e,l,t){"use strict";var a=function(e,t){var a={widths:{phone:{landscape:100/t.mobileVisibleColumns.phone.landscape,portrait:100/t.mobileVisibleColumns.phone.portrait},tablet:{landscape:100/t.mobileVisibleColumns.tablet.landscape,portrait:100/t.mobileVisibleColumns.tablet.portrait}}};document.querySelector("head").appendChild(l.createElement(Planner.Templates.mobile(a)))};a.DEFAULTS={mobileVisibleColumns:{phone:{landscape:2,portrait:1},tablet:{landscape:5,portrait:3}}},e.register("mobile",a)}(Planner.Plugins,Planner.Utils);
!function(e,n,t,r,i){"use strict";function o(n,i,o){function a(){var e=new Date,n=e.getHours()+e.getMinutes()/60;return n*i.timeslotHeight*i.timeslots+i.hourlineMargin}function u(){var n=a(),t=e.screen.height/i.hourlineScreenSection;e.scroll(0,n-t)}function s(){var e=a();w.style.top=e+"px"}function c(){v=!0,w.style.display="inherit"}function l(){v=!1,w.style.display="none"}function p(){v=!v,v?c():l()}function d(e,n){return e-n%e}function h(e){return e.start<=Date.now()}function f(){function e(e){return e.start}function n(){return d(i.redrawInterval,Date.now())+1e3}function a(e){var r=e.push;e.push=function(n){h(n)?e.redraw(n):(r.apply(e,[n]),1===e.size()&&e.loop())},e.update=function(n){e.redraw(n),e.remove(n),e.push(n)},e.peek=function(){return e.size()?e.content[0]:null},e.redraw=function(e){var n=h(e)?t.addClass:t.removeClass,r=o.mapCard.get(e);for(var i in r)r.hasOwnProperty(i)&&n(r[i],"past-event")},e.action=function(){for(var n;(n=e.peek())&&n.start<=Date.now();)e.redraw(e.pop())},e.clear=function(){e.content=[],e.timer&&(clearTimeout(e.timer),e.timer=null)},e.loop=function(){e.timer=setTimeout(function(){e.action(),e.loop()},n())}}var u=new r(e);return a(u),o.events.subscribe("cardDrawn",u.push),o.events.subscribe("cardDeleted",u.remove),o.events.subscribe("cardUpdated",u.update),o.events.subscribe("plannerClear",u.clear),u}var v=!0,w=t.createElement(Planner.Templates.hourline());n.querySelector(".planner-container").appendChild(w),u(),s(),e.setInterval(s,3600*i.hourlineTickUpdate),this.findHeight=a,this.scrollScreen=u,this.show=c,this.hide=l,this.toggle=p,this.redrawLoop=new f}o.DEFAULTS={hourlineMargin:85,hourlineScreenSection:3,hourlineTickUpdate:5,redrawInterval:9e5},n.Hourline=o,n.register("hourline",o)}(window,Planner.Plugins,Planner.Utils,Ds.BinaryHeap);
!function(n,e,t,r){"use strict";var i=function(n,r,i){this.element=n,this.options=r,this.planner=i,this.listReduced=[],this.currentInteraction=null,this.currentCard=null,this.currentElement=null,this.currentColumn=null,this.initialIndex=null,this.initialY=null;var o=n.querySelectorAll(".planner-column > div"),s={},a={},h=this,l=function(n,e){s[n]=s[n]||[],s[n].push(e.bind(h))},u=function(n,e){a[n]=a[n]||[],a[n].push(e.bind(h))};t.touch&&Planner.Plugins.isRegistered("mobile")?(l("cardDomDrawn",this.touchTap),u("touchstart",this.touchPress),u("touchmove",this.touchMove),u("touchend",this.touchEnd)):(l("cardDomDrawn",this.addResizeDom),l("cardDomDrawn",this.cardClick),l("cardDomDrawn",this.dragCard),u("mousedown",this.mouseDown),u("mousemove",this.mouseMove),u("mouseup",this.mouseUp),u("dragover",this.dragOver),u("dragenter",this.dragChangeColumn),u("drop",this.drop));for(var c in s)if(s.hasOwnProperty(c))for(var d=0;d<s[c].length;d++)this.planner.events.subscribe(c,s[c][d]);for(var d=0;d<o.length;d++)for(var m in a)if(a.hasOwnProperty(m))for(var p=0;p<a[m].length;p++)o[d].addEventListener(m,a[m][p]);var v=e.createElement(Planner.Templates.interaction());document.querySelector("head").appendChild(v)};i.DEFAULTS={dragComponent:"---"},n.Interaction=i,n.register("interaction",i)}(Planner.Plugins,Planner.Utils,Planner.Modernizr);
!function(t,e,n,i){"use strict";var r={};r.createCard=function(t){var i=this.planner._indexToAttribute(n.index(t)),r=this.planner._indexToAttribute(n.index(t)+1),a=n.updateDate(new Date,i.hours,i.minutes),o=n.updateDate(new Date,r.hours,r.minutes),s=[parseInt(t.parentElement.getAttribute("data-column-id"),10)],u=null;return this.options.autoId&&(u=e.generateId(this.options)),isNaN(s)?null:new this.options.model({id:u,start:a,end:o,columns:s})},t.prototype=n.extend(t.prototype,r)}(Planner.Plugins.Interaction,Planner.Helpers,Planner.Utils);
!function(t,e,r){"use strict";var n={};n.drag=function(t){this.planner.events.publish("/card/actions/dragged",[this.currentCard,this.currentElement]),t.appendChild(this.currentElement);var r=this.currentElement.getAttribute("data-end")-this.currentElement.getAttribute("data-start"),n=parseInt(this.currentElement.parentElement.parentElement.getAttribute("data-column-id"),10),s=e.index(this.currentElement.parentNode),a=0!==r?r+1:r,i=this.planner._indexToAttribute(s),d=this.planner._indexToAttribute(s+a),u=e.updateDate(this.currentCard.start,i.hours,i.minutes),h=e.updateDate(this.currentCard.end,d.hours,d.minutes);this.currentCard.update({columns:[n],start:u,end:h}),e.removeClass(this.currentElement,"dragged"),this.planner.updateDom(this.currentElement,this.currentCard,n),this.resetDashedDom()},n.resetDashedDom=function(){for(;this.listReduced.length>0;)e.removeClass(this.listReduced.pop(),"card-dashed")},t.prototype=e.extend(t.prototype,n)}(Planner.Plugins.Interaction,Planner.Utils);
!function(t,n,e){"use strict";var r={};r.startInteraction=function(t,n,e,r,i){this.currentInteraction=t,this.currentCard=n,this.currentElement=e,this.currentColumn=e.parentElement.parentElement,this.initialIndex=r,this.initialY=i,this.planner.events.publish("/card/interaction/starts",[t])},r.stopInteraction=function(){this.currentElement.style.width="",this.currentElement.style.left="",this.planner.events.publish("/card/interaction/drawn",[this.currentCard,this.currentElement]),this.planner.events.publish("/card/interaction/ends",[this.currentInteraction]),this.currentInteraction=null,this.currentCard=null,this.currentElement=null,this.currentColumn=null,this.initialIndex=null,this.initialY=null},t.prototype=n.extend(t.prototype,r)}(Planner.Plugins.Interaction,Planner.Utils);
!function(e,t,n,i){"use strict";var r={};r.addResizeDom=function(e,i){if(!e.disabled){for(var r=n.createElement(t.drag({dragComponent:this.options.dragComponent})),a=i.querySelectorAll(".planner-card-title"),o=0;o<a.length;o++)a[o].parentNode.appendChild(r);r.addEventListener("mousedown",this.mouseDownResize.bind(this,e,i))}},r.resize=function(e){var t=Math.floor((e-this.initialY)/this.options.timeslotHeight),i=this.planner._indexToAttribute(this.initialIndex+t+1);t>=0&&(this.currentCard.update({end:n.updateDate(this.currentCard.end,i.hours,i.minutes)}),this.planner.updateDom(this.currentElement,this.currentCard))},e.prototype=n.extend(e.prototype,r)}(Planner.Plugins.Interaction,Planner.Templates,Planner.Utils);
!function(t,e,r){"use strict";var n={};n.cardClick=function(t,e){t.disabled||e.addEventListener("click",this.mouseClick.bind(this,t,e))},n.mouseClick=function(t,e,r){var n=e.children[0],i=e.children[1];r.target!==e&&r.target!==n&&r.target!==i||null!==this.currentInteraction||this.planner.events.publish("cardClicked",[t,e]),r.stopPropagation()},n.mouseDown=function(t){if(t.currentTarget===t.target){var r=this.createCard(t.target);this.planner.drawCard(r);var n=r.columns[0];this.startInteraction("dragCreation",r,this.planner.mapCard.get(r)[n],e.index(t.target),t.clientY),t.preventDefault()}},n.mouseDownResize=function(t,r,n){this.startInteraction("resize",t,r,this.planner._attributeToIndex(t.start),e.offset(r).top-document.body.scrollTop),e.addClass(this.currentElement,"resizable"),n.preventDefault()},n.mouseMove=function(t){("dragCreation"===this.currentInteraction||"resize"===this.currentInteraction)&&(this.resize(t.clientY),t.preventDefault())},n.mouseUp=function(t){if("dragCreation"===this.currentInteraction)this.planner.events.publish("cardCreated",[this.currentCard,this.currentElement]),this.stopInteraction(),t.preventDefault();else if("resize"===this.currentInteraction){if(this.currentCard.columns.length>1){var r=this.planner.mapCard.get(this.currentCard);for(var n in r)r.hasOwnProperty(n)&&(this.planner.updateDom(r[n],this.currentCard),this.planner.events.publish("cardDomDrawn",[this.currentCard,r[n]]))}e.removeClass(this.currentElement,"resizable"),this.planner.events.publish("cardUpdated",[this.currentCard,this.currentElement]),this.stopInteraction(),t.preventDefault()}},t.prototype=e.extend(t.prototype,n)}(Planner.Plugins.Interaction,Planner.Utils);
!function(t,e,r){"use strict";var a={};a.dragOver=function(t){t.preventDefault()},a.drop=function(t){this.drag(t.currentTarget),this.planner.events.publish("cardUpdated",[this.currentCard,this.currentElement]),this.stopInteraction(),t.preventDefault()},a.dragChangeColumn=function(t){t.currentTarget.parentElement!==this.currentColumn&&(this.currentColumn=t.currentTarget.parentElement,this.resetDashedDom())},a.dragCard=function(t,r){if(!t.disabled){var a=this;r.setAttribute("draggable",!0);var n=function(n){t.columns.length>1?n.preventDefault():(a.startInteraction("dragMove",t,r),e.addClass(r,"dragged"),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/html",r.outerHTML),n.dataTransfer.setDragImage(r,5,10))},s=function(){e.hasClass(r,"card-dashed")||(e.addClass(r,"card-dashed"),a.listReduced.push(r))};r.addEventListener("dragstart",n),r.addEventListener("dragover",s)}},t.prototype=e.extend(t.prototype,a)}(Planner.Plugins.Interaction,Planner.Utils);
!function(t,e,n){"use strict";var r,a=300,i=0,c=0,u=0,o={};o.touchPress=function(t){function n(){u=o.createCard(t.target),o.planner.drawCard(u),c=u.columns[0],o.startInteraction("dragCreation",u,o.planner.mapCard.get(u)[c],e.index(t.target),t.touches[0].clientY)}var c,u,o=this;r=setTimeout(n,a),i=t.touches[0].pageY},o.touchMove=function(t){r&&i!==t.touches[0].pageY&&clearTimeout(r);var e=t.touches[0];c=e.pageX,u=e.pageY,null!==this.currentCard&&(this.resize(t.touches[0].clientY),t.preventDefault())},o.touchEnd=function(){r&&clearTimeout(r),null!==this.currentCard&&(this.planner.events.publish("cardCreated",[this.currentCard,this.currentElement]),this.stopInteraction())},o.touchTap=function(t,e){function n(n){var i=n.touches[0],o=c=i.pageX,s=u=i.pageY;setTimeout(function(){o===c&&s===u&&r.planner.events.publish("cardClicked",[t,e])},a)}var r=this;t.disabled||e.addEventListener("touchstart",n)},t.prototype=e.extend(t.prototype,o)}(Planner.Plugins.Interaction,Planner.Utils);
!function(n){"use strict";var e=function(n,e){var t=new Date;return t.setHours(n),t.setMinutes(e),t.setSeconds(0),t};document.addEventListener("DOMContentLoaded",function(){var n=new Planner.Models.Card({id:1,title:"Having a long dinner",content:"Just a comment",start:e(19,0),end:e(21,45),columns:[1]}),t=new Planner.Models.Card({id:2,title:"DjangoCon meeting!",content:"@Orvieto",start:e(13,0),end:e(15,30),columns:[1]}),r=new Planner.Models.Card({id:3,title:"Hello IT",content:"Standard nerds",start:e(13,45),end:e(16,15),columns:[2,4]}),a=new Planner.Models.Card({id:4,title:"Having another dinner :(",content:"Just a comment",start:e(19,0),end:e(21,45),columns:[1]}),d=document.querySelector(".js-planner"),o={plugins:["slider","collision","mobile","interaction","hourline"]},i=new Planner(d,o);i.drawCard(n),i.drawCard(t),i.drawCard(r),i.drawCard(a),window.planner=i})}();